{% extends "base.html" %}

{% block header %}
<header class="header collection-header">
    <h1>{{ collection.title }}</h1>
    <p class="subtitle">{{ collection.subtitle }}</p>
</header>
{% endblock %}

{% block content %}

<!-- –°—Ç–∏–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
.custom-order-section {
    padding: 20px 0 30px;
    text-align: right;
}

.custom-order-btn {
    background: linear-gradient(135deg, #ff6b35 0%, #e55a2b 100%);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 16px 36px;
    font-size: 1.1em;
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
    position: relative;
    overflow: hidden;
}

.custom-order-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 25px rgba(255, 107, 53, 0.4);
    gap: 16px;
}

.custom-order-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.custom-order-btn:hover::before {
    left: 100%;
}

.btn-icon {
    font-size: 1.2em;
    transition: transform 0.3s ease;
}

.btn-arrow {
    font-size: 1.1em;
    transition: transform 0.3s ease;
}

.custom-order-btn:hover .btn-arrow {
    transform: translateX(5px);
}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
.order-modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(5px);
    z-index: 9999;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.order-modal-container {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-radius: 20px;
    max-width: 500px;
    width: 100%;
    color: white;
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255, 107, 53, 0.3);
    animation: slideUp 0.4s ease;
}

@keyframes slideUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.5em;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 10;
}

.modal-close-btn:hover {
    background: rgba(255, 107, 53, 0.3);
    transform: rotate(90deg);
}

.modal-header {
    padding: 40px 40px 20px;
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-icon {
    font-size: 2.5em;
    margin-bottom: 16px;
    display: block;
    animation: glow 2s infinite alternate;
}

@keyframes glow {
    from { text-shadow: 0 0 10px rgba(255, 107, 53, 0.5); }
    to { text-shadow: 0 0 20px rgba(255, 107, 53, 0.8); }
}

.modal-title {
    font-size: 1.8em;
    margin-bottom: 8px;
    color: #ff9e6d;
}

.modal-subtitle {
    opacity: 0.8;
    font-size: 0.95em;
}

.modal-content {
    padding: 30px 40px;
}

.info-highlight {
    background: rgba(255, 107, 53, 0.1);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 25px;
    border-left: 4px solid #ff6b35;
}

.features-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 25px;
}

.feature-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    font-size: 0.95em;
    line-height: 1.5;
}

.feature-check {
    color: #4caf50;
    font-weight: bold;
    background: rgba(76, 175, 80, 0.1);
    min-width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
}

.important-note {
    background: rgba(255, 152, 0, 0.1);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    border: 1px solid rgba(255, 152, 0, 0.3);
}

.note-icon {
    font-size: 1.5em;
    flex-shrink: 0;
}

.modal-footer {
    padding: 0 40px 40px;
    text-align: center;
}

.telegram-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    background: linear-gradient(135deg, #0088cc 0%, #005c99 100%);
    color: white;
    text-decoration: none;
    padding: 16px 36px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 1.1em;
    transition: all 0.3s ease;
    width: 100%;
    box-shadow: 0 4px 15px rgba(0, 136, 204, 0.3);
}

.telegram-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 136, 204, 0.4);
    gap: 16px;
}

.telegram-icon {
    font-size: 1.2em;
    transition: transform 0.3s ease;
}

.telegram-btn:hover .telegram-icon {
    transform: translateX(3px);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
@media (max-width: 600px) {
    .order-modal-container {
        margin: 20px;
        max-width: calc(100% - 40px);
    }
    
    .modal-header,
    .modal-content,
    .modal-footer {
        padding: 25px 20px;
    }
    
    .custom-order-btn {
        padding: 14px 28px;
        font-size: 1em;
    }
}

@media (max-width: 480px) {
    .custom-order-section {
        text-align: center;
    }
    
    .custom-order-btn {
        width: 100%;
        max-width: 300px;
        justify-content: center;
    }
}
</style>

<!-- –ö–Ω–æ–ø–∫–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –¥–ª—è –≤—Å–µ—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π -->
<div class="custom-order-section">
    <button class="custom-order-btn" onclick="openOrderInfo()">
        <span class="btn-icon">üé®</span>
        <span class="btn-text">–ó–∞–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é —Ñ–∏–≥—É—Ä–∫—É</span>
        <span class="btn-arrow">‚Üí</span>
    </button>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ -->
<div id="orderInfoModal" class="order-modal-overlay">
    <div class="order-modal-container">
        <button class="modal-close-btn" onclick="closeOrderInfo()">
            <span class="close-icon">&times;</span>
        </button>
        
        <div class="modal-header">
            <div class="modal-icon">‚ú®</div>
            <h3 class="modal-title">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑</h3>
            <p class="modal-subtitle">–°–æ–∑–¥–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ñ–∏–≥—É—Ä–∫—É –ø–æ –≤–∞—à–µ–π –∏–¥–µ–µ</p>
        </div>
        
        <div class="modal-content">
            <div class="info-highlight">
                <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–∫–∞–∑–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—É—é 3D-—Ñ–∏–≥—É—Ä–∫—É –ø–æ –≤–∞—à–µ–π –∏–¥–µ–µ –∏–ª–∏ —ç—Å–∫–∏–∑—É ‚Äî –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –ø–æ–¥–∞—Ä–∫–∞ –∏–ª–∏ –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.</p>
            </div>
            
            <div class="features-list">
                <div class="feature-item">
                    <span class="feature-check">‚úì</span>
                    <span>–í–∞–º –Ω–µ –Ω—É–∂–µ–Ω –≥–æ—Ç–æ–≤—ã–π 3D-—Ñ–∞–π–ª ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–¥–µ–∏, —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏—è</span>
                </div>
                <div class="feature-item">
                    <span class="feature-check">‚úì</span>
                    <span>–Ø –ø–æ–º–æ–≥–∞—é –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ç –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞—é, –∫–∞–∫ –ª—É—á—à–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–≥—É—Ä–∫—É</span>
                </div>
                <div class="feature-item">
                    <span class="feature-check">‚úì</span>
                    <span>–ü–µ—Ä–µ–¥ –ø–µ—á–∞—Ç—å—é –≤—ã —É–≤–∏–¥–∏—Ç–µ 3D-–ø—Ä–µ–≤—å—é –∏ —Å–º–æ–∂–µ—Ç–µ –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏</span>
                </div>
                <div class="feature-item">
                    <span class="feature-check">‚úì</span>
                    <span>–ú–æ–¥–µ–ª—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—Å—è —Å —É—á—ë—Ç–æ–º 3D-–ø–µ—á–∞—Ç–∏ (–≥–µ–æ–º–µ—Ç—Ä–∏—è, —Ç–æ–ª—â–∏–Ω–∞, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å)</span>
                </div>
                <div class="feature-item">
                    <span class="feature-check">‚úì</span>
                    <span>–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏, —Ä–∞–∑–º–µ—Ä–∞ –∏ —É—Ä–æ–≤–Ω—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏</span>
                </div>
                <div class="feature-item">
                    <span class="feature-check">‚úì</span>
                    <span>–°—Ä–æ–∫–∏ –æ–±—Å—É–∂–¥–∞—é—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∏ —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è</span>
                </div>
            </div>
            
            <div class="important-note">
                <div class="note-icon">üí≠</div>
                <p>–Ø –±–µ—Ä—É –Ω–∞ —Å–µ–±—è –≤–µ—Å—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å ‚Äî –æ—Ç —Å–∫—É–ª—å–ø—Ç–∞ –¥–æ –≥–æ—Ç–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏.<br>
                –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ—è, –Ω–æ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –µ—ë —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.<br>
                –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ, –º—ã –≤—Å—ë –æ–±—Å—É–¥–∏–º.</p>
            </div>
        </div>
        
        <div class="modal-footer">
            <a href="https://t.me/dikayl" target="_blank" class="telegram-btn">
                <span class="telegram-icon">‚úàÔ∏è</span>
                –ù–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ä—É –≤ Telegram
            </a>
        </div>
    </div>
</div>

<script>
function openOrderInfo() {
    const modal = document.getElementById('orderInfoModal');
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeOrderInfo() {
    const modal = document.getElementById('orderInfoModal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
document.getElementById('orderInfoModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeOrderInfo();
    }
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Escape
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeOrderInfo();
    }
});
</script>

<!-- –û—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∫–æ–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
<div class="back-wrapper">
    <a href="/" class="back-button">
        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
    </a>
</div>
<div class="collection-description">
    <p>{{ collection.description }}</p>
</div>

{# –ë–ª–æ–∫ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è LM_Collection #}
{% if collection.id == "LM_Collection" %}
    {% set pinned = None %}
    {% for figure in figures %}
        {% if figure.pinned %}
            {% set pinned = figure %}
        {% endif %}
    {% endfor %}
    {% if pinned %}
    <div class="featured-figure" style="border: 3px solid #ff9800; background: linear-gradient(90deg, #fffbe7 60%, #ffe0b2 100%); box-shadow: 0 4px 16px #ff980055; border-radius: 18px; margin-bottom: 24px;">
        <div class="featured-figure-image">
            <img src="{{ pinned.images[0] }}" alt="{{ pinned.title }}">
        </div>
        <div class="featured-figure-content">
            <h2 style="color:#ff9800;">{{ pinned.title }} <span style="font-size:0.7em; background:#ff9800; color:#fff; border-radius:6px; padding:2px 8px; margin-left:8px;">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π</span></h2>
            <p>{{ pinned.description }}</p>
            <button class="featured-figure-action" onclick="openOrderInfo()" style="background: linear-gradient(90deg, #ff9800 60%, #ffb74d 100%); color: #fff; font-weight: bold; border: none; border-radius: 8px; padding: 14px 32px; font-size: 1.2em; box-shadow: 0 2px 8px #ff980055; cursor: pointer; transition: background 0.2s; animation: pulse 1.5s infinite alternate;">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑</button>
        </div>
    </div>
    <div id="orderInfoModal" style="display:none; position:fixed; z-index:1000; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.55); align-items:center; justify-content:center;">
        <div style="background:#fffbe7; border-radius:16px; max-width:420px; margin:auto; padding:32px 24px; box-shadow:0 8px 32px #ff980099; position:relative;">
            <button onclick="closeOrderInfo()" style="position:absolute; top:12px; right:16px; background:none; border:none; font-size:1.5em; color:#ff9800; cursor:pointer;">&times;</button>
            <h3 style="color:#ff9800; margin-bottom:12px;">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑</h3>
            <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–∫–∞–∑–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ñ–∏–≥—É—Ä–∫—É –ø–æ –≤–∞—à–µ–º—É —ç—Å–∫–∏–∑—É –∏–ª–∏ –∏–¥–µ–µ. –û–±—Å—É–¥–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ —Å –∞–≤—Ç–æ—Ä–æ–º –∏ –ø–æ–ª—É—á–∏—Ç–µ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—É—é —Ä–∞–±–æ—Ç—É!</p>
            <a href="https://t.me/testobotnub_bot" target="_blank" style="display:inline-block; margin-top:18px; background:#ff9800; color:#fff; font-weight:bold; border-radius:8px; padding:12px 28px; font-size:1.1em; text-decoration:none; box-shadow:0 2px 8px #ff980055;">–ù–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ä—É</a>
        </div>
    </div>
    <style>
    @keyframes pulse {
        0% { box-shadow: 0 2px 8px #ff980055; }
        100% { box-shadow: 0 2px 24px #ff9800aa; }
    }
    </style>
    <script>
    function openOrderInfo() {
        document.getElementById('orderInfoModal').style.display = 'flex';
    }
    function closeOrderInfo() {
        document.getElementById('orderInfoModal').style.display = 'none';
    }
    </script>
    <hr style="margin:32px 0;">
    {% endif %}
{% endif %}

<div class="figures-list">
    {% for figure in figures %}
        {% if figure.status != "featured" %}
        <a href="/figure/{{ figure.id }}" class="figure-item">
            <div class="figure-item-image">
                <img src="{{ figure.images[0] }}" alt="{{ figure.title }}" onerror="this.src='https://via.placeholder.com/100x100/1A1A1A/7C4DFF?text={{ figure.title|urlencode }}'">
            </div>
            <div class="figure-item-content">
                <h3 class="figure-item-title">{{ figure.title }}</h3>
                <div class="figure-item-price">{{ figure.price }}</div>
                <div class="figure-item-meta">
                    <span class="status status-{{ figure.status }}">{{ figure.status_text }}</span>
                    <span class="figure-item-size">{{ figure.size }}</span>
                </div>
            </div>
        </a>
        {% endif %}
    {% endfor %}
</div>
{% endblock %}